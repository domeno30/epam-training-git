- hosts: mysql-server
  become: True
  tasks:
  - name: yum install htop1
    yum:
      name: htop
      state: latest
  - name: Remote RPM
    yum: name=https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm


  - name: Ensure required packages are Installed12
    dnf:
     name:
      - mysql-server
      - mysql-devel
      - gcc
      - MySQL-python
     disable_gpg_check: yes
     state: latest
  - name: Ensure mysql service is running
    systemd:
     name: mysqld
     state: started
     enabled: yes

  - name: Ch. the auth plugin for MySQL root user
  shell: mysql -u root -e 'UPDATE mysql.user SET plugin= "mysql_native_password" WHERE user= "root" AND host= "localhost"'
  shell: mysql -u root -e 'FLUSH PRIVILEGES'
    mysql_user:
     login_host: 'localhost'
     login_user: 'root'
     login_password: ''
     name: 'root'
     password: '{{ AreIkm.)679848# }}'
     state: present

# create mysql db
  - mysql_db:
     community.mysql.mysql_db:
      name: webx
      state: present

  - mysql_user:
     name: webx
     password: sdfj67856sd;fljsdf98335
     priv: '*webx*:ALL,GRANT'
     host: localhost
     state: present
